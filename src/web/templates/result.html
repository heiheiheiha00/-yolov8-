<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>åˆ†æç»“æœ - è¿åŠ¨åŠ¨ä½œåˆ†æç³»ç»Ÿ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  </head>
  <body>
    <div class="container">
      <h1>ğŸ“ˆ è¿åŠ¨åˆ†æç»“æœ</h1>
      {% if activity_label %}
        <p class="activity-label">å½“å‰åˆ†æç±»å‹ï¼š{{ activity_label }}</p>
      {% endif %}
      <a href="{{ url_for('upload') }}">â† è¿”å›ä¸Šä¼ </a>

      {% if show_keynode_plot and keynode_plot_filename %}
        <section>
          <h2>ğŸ¯ å…³é”®èŠ‚ç‚¹ç›¸ä¼¼åº¦</h2>
          <p style="color: #64748b; margin-bottom: 1rem;">å…³é”®å…³èŠ‚ä¸å‚è€ƒåŠ¨ä½œçš„ç›¸ä¼¼åº¦å¯¹æ¯”</p>
          <img src="{{ url_for('media', session_id=session_id, filename=keynode_plot_filename) }}" alt="å…³é”®èŠ‚ç‚¹ç›¸ä¼¼åº¦æŸ±çŠ¶å›¾" class="plot" />
        </section>
      {% endif %}

      {% if angle_plot_filename %}
        <section>
          <h2>ğŸ“Š è§’åº¦å˜åŒ–æ›²çº¿</h2>
          <p style="color: #64748b; margin-bottom: 1rem;">å„å…³èŠ‚è§’åº¦éšæ—¶é—´çš„å˜åŒ–è¶‹åŠ¿</p>
          <img src="{{ url_for('media', session_id=session_id, filename=angle_plot_filename) }}" alt="è§’åº¦æ›²çº¿å›¾" class="plot" />
        </section>
      {% endif %}

      {% if focus_similarity_plot_filename %}
        <section>
          <h2>â­ é‡ç‚¹æŒ‡æ ‡ç›¸ä¼¼åº¦</h2>
          <p style="color: #64748b; margin-bottom: 1rem;">é‡ç‚¹å…³èŠ‚ä¸å‚è€ƒåŠ¨ä½œçš„ç›¸ä¼¼åº¦åˆ†æ</p>
          <img src="{{ url_for('media', session_id=session_id, filename=focus_similarity_plot_filename) }}" alt="é‡ç‚¹ç›¸ä¼¼åº¦æŸ±çŠ¶å›¾" class="plot" />
        </section>
      {% endif %}

      {% if focus_metrics %}
        <section>
          <h2>ğŸ“‹ é‡ç‚¹åŠ¨ä½œå‚æ•°</h2>
          <p style="color: #64748b; margin-bottom: 1rem;">å…³é”®åŠ¨ä½œè§’åº¦çš„è¯¦ç»†æ•°æ®</p>
          <table class="metrics-table">
            <thead>
              <tr>
                <th>æŒ‡æ ‡åç§°</th>
                <th>è§’åº¦æ•°å€¼ (Â°)</th>
              </tr>
            </thead>
            <tbody>
              {% for name, value in focus_metrics.items() %}
                <tr>
                  <td><strong>{{ name }}</strong></td>
                  <td>{{ "%.2f"|format(value) if value == value else "N/A" }}</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </section>
      {% endif %}

      {% if annotated_video_filename %}
        <section>
          <h2>ğŸ¥ éª¨æ¶å åŠ è§†é¢‘</h2>
          <p style="color: #64748b; margin-bottom: 1rem;">å¸¦æœ‰å§¿æ€ä¼°è®¡éª¨æ¶æ ‡æ³¨çš„è§†é¢‘å›æ”¾</p>
          <video 
            controls 
            class="plot"
            preload="metadata"
            playsinline
            webkit-playsinline
            style="width: 100%; max-width: 100%; height: auto;"
          >
            <source src="{{ url_for('media', session_id=session_id, filename=annotated_video_filename) }}" type="video/mp4" />
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ï¼Œè¯·ä¸‹è½½åæŸ¥çœ‹ã€‚
          </video>
          <p>
            <a href="{{ url_for('download', session_id=session_id, filename=annotated_video_filename) }}" target="_blank">
              â¬‡ï¸ ä¸‹è½½å¸¦éª¨æ¶æ ‡æ³¨çš„è§†é¢‘
            </a>
          </p>
        </section>
      {% endif %}

      <section>
        <h2>ğŸ’¡ åŠ¨ä½œå»ºè®®</h2>
        {% if recommendations %}
          <ul>
            {% for rec in recommendations %}
              <li>{{ rec }}</li>
            {% endfor %}
          </ul>
        {% else %}
          <p style="padding: 1.5rem; background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); border-radius: 10px; color: #065f46; font-weight: 500; margin: 0;">
            âœ… åŠ¨ä½œæ•´ä½“è¡¨ç°è‰¯å¥½ï¼Œç»§ç»­ä¿æŒï¼
          </p>
        {% endif %}
        {% if activity_key == "shooting" or activity_key == "running" %}
          <p style="margin-top: 1.5rem;">
            <a href="{{ url_for('detailed_advice', session_id=session_id) }}" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.875rem 1.5rem; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: #ffffff; border-radius: 10px; font-weight: 600; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); transition: all 0.3s ease; text-decoration: none;">
              ğŸ“‹ æŸ¥çœ‹è¯¦ç»†å»ºè®®
            </a>
          </p>
        {% endif %}
      </section>
    </div>
  </body>
</html>
